Author: Philipp Hahn <pmhahn@debian.org>

Fix shell quoting.
--- a/contrib/action.script
+++ b/contrib/action.script
@@ -4,43 +4,43 @@
 
 scan_dir=/var/spool/scan
 datetime=`date +%F_%H%M%S`
-filename=scan-$datetime
+filename="scan-$datetime"
 send_to=email@address.com
 
-case $SCANBD_ACTION in
+case "$SCANBD_ACTION" in
  pdf)
   logger -t "scanbd: $0" "$SCANBD_ACTION - scanning and converting to ps"
-  scanimage -d $SCANBD_DEVICE --mode Color --resolution 150 --depth 16 |
-convert -density 150 - $scan_dir/$filename.ps
+  scanimage -d "$SCANBD_DEVICE" --mode Color --resolution 150 --depth 16 |
+   convert -density 150 - "$scan_dir/$filename.ps"
   logger -t "scanbd: $0" "$SCANBD_ACTION - converting ps to pdf"
-  ps2pdf  -sPAPERSIZE=a4 $scan_dir/$filename.ps $scan_dir/$filename.pdf
-  rm $scan_dir/$filename.ps
+  ps2pdf  -sPAPERSIZE=a4 "$scan_dir/$filename.ps" "$scan_dir/$filename.pdf"
+  rm "$scan_dir/$filename.ps"
   ;;
  scan)
-  scanimage -d $SCANBD_DEVICE --resolution 150 --mode Color --depth 16
---format=tiff > $scan_dir/$filename.tiff
+  scanimage -d "$SCANBD_DEVICE" --resolution 150 --mode Color --depth 16 --format=tiff > "$scan_dir/$filename.tiff"
   ;;
  copy)
   logger -t "scanbd: $0" "$SCANBD_ACTION - scanning"
-  scanimage -d $SCANBD_DEVICE --resolution 300 --depth 16--format=tiff > $scan_dir/$filename.tiff
+  scanimage -d "$SCANBD_DEVICE" --resolution 300 --depth 16--format=tiff > "$scan_dir/$filename.tiff"
 # | convert -density 300 - $scan_dir/$filename.ps
   logger -t "scanbd: $0" "$SCANBD_ACTION - printing"
-  lp $scan_dir/$filename.tiff
-  rm $scan_dir/$filename.ps
+  lp "$scan_dir/$filename.tiff"
+  rm "$scan_dir/$filename.tiff"
   ;;
 email)
   logger -t "scanbd: $0" "$SCANBD_ACTION - scanning and converting to ps"
-  scanimage -d $SCANBD_DEVICE --mode Color --resolution 150 --depth 16|
-convert -density 150 - $scan_dir/$filename.ps
+  scanimage -d "$SCANBD_DEVICE" --mode Color --resolution 150 --depth 16 |
+   convert -density 150 - "$scan_dir/$filename.ps"
   logger -t "scanbd: $0" "$SCANBD_ACTION - converting ps to pdf"
-  ps2pdf  -sPAPERSIZE=a4 $scan_dir/$filename.ps $scan_dir/$filename.pdf
+  ps2pdf  -sPAPERSIZE=a4 "$scan_dir/$filename.ps" "$scan_dir/$filename.pdf"
   logger -t "scanbd: $0" "$SCANBD_ACTION - sending pdf"
   (cat <<EOCAT
 Document scanned on Canon LiDE 110
 EOCAT
-uuencode $scan_dir/$filename.pdf $scan_dir/$filename.pdf ) | mail -a
-"From: Canon scanner <some@email.sk>" -s "Document $filename" $send_to
-  rm $scan_dir/$filename.ps
+uuencode "$scan_dir/$filename.pdf" "$scan_dir/$filename.pdf" ) | mail -a
+"From: Canon scanner <some@email.sk>" -s "Document $filename" "$send_to"
+  rm "$scan_dir/$filename.ps"
+  rm "$scan_dir/$filename.pdf"
   ;;
 *)
   logger -t "scanbd: $0" "Unhandled action request."
--- a/scripts/example.script
+++ b/scripts/example.script
@@ -23,6 +23,6 @@
 
 logger -t "scanbd: $0" "Begin of $SCANBD_ACTION for device $SCANBD_DEVICE"
 
-scanimage -d $SCANBD_DEVICE  2>&1 > /tmp/scanner.test
+scanimage -d "$SCANBD_DEVICE"  2>&1 > /tmp/scanner.test
 
-logger -t "scanbd: $0" "End   of $SCANBD_ACTION for device $SCANBD_DEVICE"
\ No newline at end of file
+logger -t "scanbd: $0" "End   of $SCANBD_ACTION for device $SCANBD_DEVICE"
--- a/scripts/scanadf.script
+++ b/scripts/scanadf.script
@@ -23,7 +23,7 @@
 
 logger -t "scanbd: $0" "Begin of $SCANBD_ACTION for device $SCANBD_DEVICE"
 
-scanner=$(echo $SCANBD_DEVICE | cut -d ':' -f 1)
-scanadf -d $SCANBD_DEVICE -o /tmp/${scanner}_${SCANBD_FUNCTION_MODE}_${SCANBD_FUNCTION} 2>&1 
+scanner=$(echo "$SCANBD_DEVICE" | cut -d ':' -f 1)
+scanadf -d "$SCANBD_DEVICE" -o "/tmp/${scanner}_${SCANBD_FUNCTION_MODE}_${SCANBD_FUNCTION}" 2>&1
 
 logger -t "scanbd: $0" "End   of $SCANBD_ACTION for device $SCANBD_DEVICE"
